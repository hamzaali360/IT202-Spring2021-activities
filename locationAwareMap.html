<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>repl.it</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <!-- <button id = "find-me">Show my location</button><br/>
<p id = "status"></p>
<a id = "map-link" target="_blank"></a> -->   
 <style>
  #map {
    height: 50%;
  }
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
</style>
  </head>
  <body>

    <div id="map"></div>
    <div id = "location"></div>


    
    <script>
      let map;

function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: -34.397, lng: 150.644 },
    zoom: 14,
  });

      const watchID = navigator.geolocation.watchPosition((position) => {
      map.setCenter({ lat: position.coords.latitude, lng:  position.coords.longitude })
      console.log(position.coords.latitude, position.coords.longitude);
      
      const cityCircle = new google.maps.Circle({
      strokeColor: "#FF0000",
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: "#FF0000",
      fillOpacity: 0.35,
      map,
      center: { lat: position.coords.latitude, lng:  position.coords.longitude },
      radius: 40,
    });
    let date = new Date();
 
 document.querySelector("#location").append(innertext = "Lat and Long = " + cityCircle.center + " " + date + "\n")
    });
 
}
  //   function geoFindMe() {

  // const status = document.querySelector('#status');
  // const mapLink = document.querySelector('#map-link');

  // mapLink.href = '';
  // mapLink.textContent = '';

  // function success(position) {
  //   const latitude  = position.coords.latitude;
  //   const longitude = position.coords.longitude;

  //   status.textContent = '';
  //   mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
  //   mapLink.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;
  // }
 

  // function error() {
  //   status.textContent = 'Unable to retrieve your location';
  // }
 
  // if(!navigator.geolocation) {
  //   status.textContent = 'Geolocation is not supported by your browser';
  // } else {
  //   status.textContent = 'Locating…';
  //   navigator.geolocation.getCurrentPosition(success, error);
  // }

//}

//document.querySelector('#find-me').addEventListener('click', geoFindMe);
</script>
<script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnpizRoZESqi7RuQ7i8R0XVxOI0cqXmxk&callback=initMap">
</script>
  </body>
</html>